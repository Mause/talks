{"updated_at": "2012-11-16T15:18:37Z", "user": None, "commit_id": "2a7eac26bb4b3bc843ce9ac7cef3ff5c860dd801", "html_url": "https://github.com/kennethreitz/requests/pull/939#discussion_r2152563", "original_commit_id": "2a7eac26bb4b3bc843ce9ac7cef3ff5c860dd801", "diff_hunk": "@@ -20,28 +17,43 @@\n packages = [\n     "requests",\n     "requests.packages",\n-    "requests.packages.urllib3",\n-    "requests.packages.urllib3.packages",\n-    "requests.packages.urllib3.packages.ssl_match_hostname"\n+    "requests.packages.common",\n+    "requests.packages.common.urllib3",\n+    "requests.packages.common.urllib3.packages",\n+    "requests.packages.common.urllib3.packages.ssl_match_hostname",\n+    "requests.packages.environment",\n+]\n+\n+py2packages = [\n+    "requests.packages.environment.oauthlib",\n+    "requests.packages.environment.oauthlib.oauth1",\n+    "requests.packages.environment.oauthlib.oauth1.rfc5849",\n+    "requests.packages.environment.oauthlib.oauth2",\n+    "requests.packages.environment.oauthlib.oauth2.draft25",\n+    "requests.packages.environment.chardet",\n ]\n \n-if is_py2:\n-    packages.extend([\n-        "requests.packages.oauthlib",\n-        "requests.packages.oauthlib.oauth1",\n-        "requests.packages.oauthlib.oauth1.rfc5849",\n-        "requests.packages.oauthlib.oauth2",\n-        "requests.packages.oauthlib.oauth2.draft25",\n-        "requests.packages.chardet",\n-    ])\n+py3packages = [\n+    "requests.packages.environment.chardet2",\n+]\n+\n+package_dir = {\n+    "requests": "source/requests",\n+    "requests.packages.common": "dependencies/common",\n+}\n+\n+if sys.version_info[0] == 2:", "position": 51, "url": "https://api.github.com/repos/kennethreitz/requests/pulls/comments/2152563", "created_at": "2012-11-16T15:12:41Z", "id": 2152563, "body": "@RishiRamraj: Sorry to say that, but you"re indeed wrong. It"s now the `MANIFEST.in` file (and not `setup.py`) that takes care of bundling **all** the necessary dependencies (for both Python2 and Python3). Then, after packaging, `setup.py` takes care of unpacking **only** the necessary dependencies for the underlying Python version at install-time. Test for yourself by running this on a PY3 `virtualenv` :-) :\r\n\r\n    pip install requests-packaging-fixes", "path": "setup.py", "pull_request_url": "https://api.github.com/repos/kennethreitz/requests/pulls/939", "_links": {"self": {"href": "https://api.github.com/repos/kennethreitz/requests/pulls/comments/2152563"}, "html": {"href": "https://github.com/kennethreitz/requests/pull/939#discussion_r2152563"}, "pull_request": {"href": "https://api.github.com/repos/kennethreitz/requests/pulls/939"}}, "original_position": 51}
