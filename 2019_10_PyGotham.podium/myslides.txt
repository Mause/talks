#= <br>What is deployment, anyway?
## PyGotham 2019
@ footer.svg

Note: breathe, Katie!

You got this

# üí™
---
@ whatis_copy.png

Note: this is What is deployment, anyway. 
---

#= .e[üëã]

Note: Hi! I'm katie
---

#= .e[üë©üèª‚Äçüîß]

Note: for the last 8 years, on and off, I've worked as a 

systems administrator

automation engineer

operations engineer

site reliabiltiy engineer

For a bunch of different places, including web hosting providers. 

It was my job to make sure not only did your website stay up, but also

if you paid enough money

---

#= .e[‚è∞]

Note: I'd get woken up in the middle of the night if your website was down. 

Given that context. 

---

#= .e[üë©üèº‚Äçüíª]

Note: Today we're going to discuss how we can get your django app

---

#= .e[‚òÅÔ∏è]

Note: 

Onto the internet. 

There's going to be a few major sections to that: 

---

#= .e[ü¶Ñ<br>üè¢<br>üöö]

Note: 

A bit about how django works

Some of the current hosting options that are available

And how you get your website off your laptop and onto one of these hosting providers. 

in other words, what, where and how

--- 

#= .e[ü¶Ñ]

Note: chapter one. Django. The what. 

If you've been to a djangogirls workshop or have ever otherwise built your own django application before, you would be familiar with 

---

$$terminal python3.7
$$prompt ~/my_project
.noop[python] manage.py runserver<br>
Watching for file changes with StatReloader<br>
Performing system checks...<br><br>
System check identified no issues (0 silenced).<br>
October 5, 2019 - 13:06:37<br>
Django version 2.2.5, using settings 'my_project.settings'<br>
Starting development server at http:/.noop[/]127.0.0.1:8000/<br>Quit the server with CONTROL-C.<br>
[05/Oct/2019 13:06:42] "GET / HTTP/1.1" 200 193<br>
$$w

Note: a terminal that looks something like this. 


---
$$terminal python3.7
$$prompt ~/my_project
.red[.noop[python] manage.py runserver]<br>
Watching for file changes with StatReloader<br>
Performing system checks...<br><br>
System check identified no issues (0 silenced).<br>
October 5, 2019 - 13:06:37<br>
Django version 2.2.5, using settings 'my_project.settings'<br>
Starting development server at http:/.noop[/]127.0.0.1:8000/<br>Quit the server with CONTROL-C.<br>
[05/Oct/2019 13:06:42] "GET / HTTP/1.1" 200 193<br>
$$w

Note: you would have run the command python manage.py runserver

---
$$terminal python3.7
$$prompt ~/my_project
.noop[python] manage.py runserver<br>
Watching for file changes with StatReloader<br>
Performing system checks...<br><br>
System check identified no issues (0 silenced).<br>
October 5, 2019 - 13:06:37<br>
Django version 2.2.5, using settings 'my_project.settings'<br>
.red[Starting development server at http:/.noop[/]127.0.0.1:8000/]<br>Quit the server with CONTROL-C.<br>
[05/Oct/2019 13:06:42] "GET / HTTP/1.1" 200 193<br>
$$w

Note: which would have said it was starting a development server on port 8000

Which if you open up your web browser

---

@= sprout_localhost_0.png

Note: you can see your django site. 

And that works fine for you. 

the problem is that the djangogirl next to you


---
@= localhost_404.png

Note: she won't be able to see your website

This is because your website is running just on your laptop. 

So what we need to do is Deploy it. 

---

#= "ü¶Ñ üöö ‚òÅÔ∏è‚ùì"

Note: so I can just take a copy of what I have on my machine, and put it on the cloud, right? 

Well, no. 

There is one major issue. 

---

$$terminal python3.7
$$prompt ~/my_project
.red[.noop[python] manage.py runserver]<br>
Watching for file changes with StatReloader<br>
Performing system checks...<br><br>
System check identified no issues (0 silenced).<br>
October 5, 2019 - 13:06:37<br>
Django version 2.2.5, using settings 'my_project.settings'<br>
Starting development server at http:/.noop[/]127.0.0.1:8000/<br>Quit the server with CONTROL-C.<br>
[05/Oct/2019 13:06:42] "GET / HTTP/1.1" 200 193<br>
$$w

Note: runserver

you know

that one that 

---

$$terminal python3.7
$$prompt ~/my_project
.noop[python] manage.py runserver<br>
Watching for file changes with StatReloader<br>
Performing system checks...<br><br>
System check identified no issues (0 silenced).<br>
October 5, 2019 - 13:06:37<br>
Django version 2.2.5, using settings 'my_project.settings'<br>
Starting .red[development server] at http:/.noop[/]127.0.0.1:8000/<br>Quit the server with CONTROL-C.<br>
[05/Oct/2019 13:06:42] "GET / HTTP/1.1" 200 193<br>
$$w

Note: started a development server on your local machine. 


---
@= runserver_00.png

Note: the django documentation clearly describes that you should not 

---

@= runserver_01.png

Note: use this in a production setting.

It has not gone through security audits or performance tests. 

And there's even a super helpful note. 

And that‚Äôs how it‚Äôs gonna stay. We‚Äôre in the business of making Web frameworks, not Web servers, so improving this server to be able to handle a production environment is outside the scope of Django.

Which is a very important distinction. 

---

@= django_framework_00.png

Note: I mean, it says it right there at the top of any page. 

---

~@ django_framework_01_169.png

Note: django is the web framework for perfectionists with deadlines 
---
~@ django_framework_02_169.png

Note: emphasis on framework. 

what we need, is a web server. 



---

@= webserver_logos_old.png

Note: there are a few major web servers that you may have heard mention of. 

Apache, Nginx, or IIS (internet information server)
---
@= webserver_logos_new.png
.fix-tilt-long[.w[....]and&nbsp;more!]
Note: they've all got new logos now, so maybe one of these versions is more familiar to you. 

There's also Caddy now that's picking up steam

All these web servers talk HTTP

Hyper Text Transfer Protocol

as in

---
@= http.svg

Note: that HTTP

The http you type into your browser. 

---

#= &nbsp;

Note: but these web servers have a problem. 

---

#= .e[üêç‚ùå]

Note: they don't talk python. Not directly. 

You need an interface that can talk to python and to a web server

---

#= WSGI
## Web Server Gateway Interface
### &nbsp;

Note: that's where w.s.g.i comes in. Or, "whis-gee". 

---
#= WSGI
## Web Server Gateway Interface
### `PEP-0333`, `PEP-3333`

Note: there are PEPs - Python Enhancement proposals - which define 

If your web framework (django) can talk WSGI, then you can use any wsgi server you like. 

And thankfully, django supports wsgi

---
$$terminal bash
$$prompt ~/my_project 
$$w ls my_project/

Note: if you check your python project


---
$$terminal bash
$$prompt ~/my_project
ls my_project/<br>
‚éΩ‚éΩinit‚éΩ‚éΩ.py<br>settings.py<br>urls.py<br>wsgi.py<br>
$$prompt ~/my_project 
$$w

Note: you'll see that you'll have

---
$$terminal bash
$$prompt ~/my_project
ls my_project/<br>
‚éΩ‚éΩinit‚éΩ‚éΩ.py<br>settings.py<br>urls.py<br>.red[wsgi.py]<br>
$$prompt ~/my_project 
$$w

Note: a convenient wsgi.py file. 

---
$$terminal bash
$$prompt ~/my_project
ls my_project/<br>
‚éΩ‚éΩinit‚éΩ‚éΩ.py<br>settings.py<br>urls.py<br>wsgi.py<br>
$$prompt ~/my_project 
$$w cat wsgi.py

Note: which was automatically generated when you created your django project. 

It'll contain 
---
$$terminal bash
$$prompt ~/my_project
ls my_project/<br>
‚éΩ‚éΩinit‚éΩ‚éΩ.py<br>settings.py<br>urls.py<br>wsgi.py<br>
$$prompt ~/my_project 
cat wsgi.py<br>
import os<br><br>from django.core.wsgi import get_wsgi_application<br><br>os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'my_project.settings')<br><br>application = get_wsgi_application()<br>
$$prompt ~/my_project 
$$w

Note: some template code that exposes the wsgi callable as a module-level variable named application. 

This will be important later. 

So we know django talks wsgi, so we can use one of the many wsgi servers


---

@= wsgi_logos.png

.fix-tilt-long[.w[....]and&nbsp;more!]

Note: there's ones like micro-wsgi or gunicorn. 

These are super interesting in themselves, and there's a great many talks on them

---

@= philip_uwsgi.png
vv [Type UWSGI; Press Enter; What happens?](https://www.youtube.com/watch?v=YoUZIzPGKT8) DjangoCon US 2017

Note: Philip James gave a great talk about microwsgi at djangocon a few years ago. 

---

@= graham_modwsgi.png

vv [Secrets of a WSGI master](https://www.youtube.com/watch?v=CPz0s1CQsTE), PyCon 2018

Note: There's also Graham Dumpleton's talk from PyCon Secrets of a wsgi master. 


---

@= logo_mess.png

Note: so we have this whole mess of logos. 

It's complicated. 

So how do we actually deploy thing? 

---

#= .e[üè¢]

Note: chapter two 

Infrastrucutre. The where.  

Because if you choose the right kind of setup, you can ignore most of those logos. 

I know. 

---

#= TODO

used to be physical servers
one per person
scale. 
you'd have to worry about everything.

then virtual servers (iaas)
several per machine
you'd still have to worry about things, but not hardware


then platforms (paas)
heroku, pythonanywhere, divio
sepcific to a language 

and now containers
as containers are now standardised


For the VMS and the containers you also have to worry about 
Configuration management. Ansible chef terraform logo mess. This is too much for today's talk

---

#= .e[üöö]

Note: chapter three

Deployment. The how. 


---

#= TODO

depends on which platform you selected

sometimes it's a manual copy and paste

services like python anywhere pull from yourt github

source control is a good idea

others can push from your github. webhooks!

but

there's your code
youer database
and your assets

---
#todo summary

It's complicated

So what do you choose?

~~It depends~~

I am an Operations engineer, I'm not your operations engineer

My recommendation?

How big is your team

Just you? A platform 

Do you have a team? Go with their expertise.

These choices are many and varied,and it'll mostly be a case
Of using whatever proper knowledge you have

Deployment. It's not easy.

---




---
#= <br>Thanks!
@ footer.svg

