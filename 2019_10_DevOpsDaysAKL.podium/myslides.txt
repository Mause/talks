class: bottom left
~@ moon.jpg
# .uber[Being kind to 3am you]
## .stpad[Katie McLaughlin<br>DevOpsDays Auckland, 2019]

Note: Words of encouragement here. 

Hi! I'm Katie

---
class: bottom right
~@ sleeping.jpeg
Note: And I like sleep. No really, getting a good night sleep is the best. 

Waking up when my body is done, my batteries are at 100% charged, and I can get going with the best possible start to my day. 

I can get up, do a bit of exercise,  get my coffee, and start my day. 

I can operate to the best of my ability. 

I can be productive and happy and get things done. 

but when I'm tired. Oh when I'm tired.. 
---
class: bottom right
~@ tired.jpeg

Note: 

I don't operate well when I'm tired. 

Being unable to focus or see properly or think straight really inhibits my ability to be productive.

So when I get paged, especially at night, I'm tired. I'm not operating at my best. 

I'm not going to be 100% there, I'm not going to be as quick thinking. 

But if I'm paged, stuff be broken, yo, so I have to get it fixed. 

So what I need to do is to set myself up for to be the best I can be when, not if, when, the pager goes off at 3am. 

By "being paged" I mean that my wonderful PagerDuty app had told me by way of a very loud noise that "SOMETHING IS BROKEN"

Because I have previously setup system monitoring for my servers that tell me if they arne't responding to ping and are immediately offline

or if they are at high diskspace and are at risk of becoming unable to respond to alerts

Or if my inbound traffic is causing autoscaling that isn't able to handle the load. 

Alerts that IMMEDIATLEY require human intervention. 

Even at 3am. 

---
class: bottom right
~@ bedlaptop.jpeg

Note: Because the 3am pager will probably happen. 

Oh, you have an on call rotation? Or Follow the sun? 

Good for you. Keep doing that. 

Having the people who are already awake being paged? that's great. 

A lot of places don't have that luxury. 

And it might not be an actual "3am pager", but it would be the apocryphl 3am pager. 

Something is going to come by which means you'll not at your best, when you're sick, or not with it, or tired. 

So these tips and tricks can help you when you're not 100%, but also you can use the time you are 100% to feedback into this system. 

---
~@ triple.jpg

# Essentials, Next Steps, Feedback

Note: I'll be splitting this up into three rough sections. 

Essentials, Next Steps, and Feedback 

And each will be segemented by clever creative commons stock imagery. 

These are all based on my personal experiences of being the gal with the pager for years, across many envirinments, many roles and many companies. From colocation to webhosting to machine learning pipelines to platforms as a service. I have _just_ a bit of experience at being awake at 3am in front of a laptop because an evil little app on my mobile said: "The servers on fiiiirrreee". (Sorry Julie <3)

---

class: bottom left
~@ basics.jpg
# The Essentials
Note: so, the essentials. 

Basically:  documentation. 

You should really write down something. 

**PAUSE**

A lot of this talk is going to be about documentation. 

Docuemntation scales. 

Documentation is there when none of your coworkers are. 

Documentation is there when your senior DBA is on leave. 

Documentation is there after your contractors leave. 

Documentation scales. 

**PA*SE**

I mean, it's useful to have documentation. 

But, where to have that documentation is also important to consider. 

You could go whole hog and do a full knowledge base and documentation management system, but that all requires buy-in and resources. Sometime, you can't get that. 

And what you really want is a good night's sleep. 

You just want to throw some notes down. 

Your tools to write this down this could be anything: a google doc, onenote, emacs, vim, vscode... 

But also consider where these docs live. Making sure that your oncall rotor can access your google drive or one drive. 

Or consider putting the docs closer to your working space: the wiki on your github pages, or say under your username on your Confluence page. Or even a text file in a private project repo, in a pinch.  

But, where you put these notes needs to have some important features. 

---
~@ basics.jpg
### .big[Editable]

Note: 

It needs to be editable. Yes, sure, but editable means something important here. 

Whereever you're storing this stuff, it needs to be able to be edited easily. 

You need to be able to readily add new information, and remove out of date information. 

This might seem obvious, but it's such an important feature that if you are stuck with, say, having a

"documentation repo" that needs to have content approved before it can be merged, it's a huge blocker. 

---
~@ basics.jpg
### .big[Searchable]
Note: it needs to be searchable. 

Paper doesn't work here. You need to have something you can Control-F at 3am, where ever you are in the world. 

This is especially useful for those road warriors. 

What I've also found super useful is creating a Custom Search Engine here. 

Having a keyword I can throw into a new tab of by browser to search my notes wiki is so helpful. 

I personally have custom search keywords for a number of services like wikipedia or twitter, 

but also a keyword for my company wiki, and also one for the code store. 

If I come across something new across something and it's not in one of those two places, then probably something third party and I just have to search the public internet, or worse: knowledge is either trapped inside someone's head. At 3am, this is the worst. 

---
~@ basics.jpg
### .big[Discoverable]

Note: 

And this is where the third tier comes in. Discoverability.

This is where the wiki excels here. Having the system being web based means that your coworkers can see it to. 

And they can also use your custom search engines to find your notes, and perhaps CoLlAbOrAtE?!



---
~@ basics.jpg
### .big[Access control]

Note: 

But also consider that you probably don't want your terraform docs in your public github repo. 

Your sysadmins who have the credentials to be able to provision should probably be able to see those docs, especially the docs of where to find that magic sshkey that enables the ability to deploy from anisble. 

This is going to be highly context specific, but it's probably a good idea to have this within your company's authentication barrier (or "firewall", if you still have one of those). 

But the question is, what do you write down? What do you want to be able to discover at 3am?
---
class: bottom left
~@ knife.jpg
# Your tools

Note: 

Well, this is really going to depend on your environment. 

Are you working in a Docker shop? Kubernetes? Lots of networking? 

What would be super useful for 3am is sharpened tools. Commands with all those strange flags, more esotric actions, or inspection scripts. 

Things that aren't aliased (though having these in your docs in case you forget what you have around is superuseful)

Having A copy-pastable command that does something like: show me all the loadbalancers that have high memory usage, display the docker containers with high CPU, show me the pod balance across the region. 

---
class: bottom left
~@ knife.jpg
# Your tools

Note: 
It really depends on your environment, but having sharpened tools are really useful. 

And also remembering that when you're storing these, ensuring they're easily usable. There's nothing worse than having those leading dollar signs or non-obvious environment variables in your stored commands that means you have to think about editing them. 

And also, making sure these commands are safe. Don't put any descructive commands in these caches unless they're clearly marked as such, have big red warning signs. 

Especially not storing destructive chains of commands that start with basic search commands. For instance, show me all the docker containers... then delete them all. 

You want to make sure that 3am you isn't blindly using a tool that's going to make things worse. 
 
Don't run with scissors, etc.
---
class: bottom left
~@ basics.jpg
# The Essentials

Note: 

So now that you have the initial basics, you need to think about their evolution

---
class: bottom left
~@ step.jpg
# Stepping Up
Note: Stepping up this repository of useful hints, how can you make it work for you? 

Again, your milage may vary, but I can offer advice for what I've seen work.

I'm a sysadmin, I'm not your sysadmin. 

---
~@ step.jpg
### .big[Integration]

Note:

Integration is a big step. And so so useful. 

Having your cache end up being moved into an "SRE Tips" page that appears on the home page for your rota information. 

Having it linked up in the channel topic of your firehouse chat channel. 

Making it available and useful. 

---
~@ step.jpg

### .bigx[Templates]

Note:

Templates! Templates are great

Say you have pet servers, that you occasionally deploy. Or clients, or other widgets that come into your perview at a rate, but that also need custom care and attention to detail

Make a template in your system that you fill out. Even something as simple as making sure you link to the ec2 search for the name of the server, and then any custom notes. Especially if one of these widgets has custom configurations outside of your provisioning automation that could be overwritten if you aren't careful (ask me how I know)

---
~@ step.jpg
### .bigx[Contextual Integration]

Note: 

Another big bonus is not just linking to the cache, but having it contexual

One fleet I maintained had a lot of different machines across different operating systems and virtualisation types. Physical machines, VMware, KVM, Xen; Linux, Windows, different versions of those in between. 

And depending on the service on the server that was having the issue there would be a link on the nagios alert to that particular service or server. 

Which meant having a Swap alert on a Linux box would immediately show the sysadmin on call a link to the basic debugging for that service. 

Or, if I'm recalling the setup properly, if there was a listing for the service specifically for that **server**, that would be shown instead. This was incredibly useful for those pesky machines that were notorious for having memory leaks or other bugbear issues. 

Which brings me to another important point

---
~@ step.jpg

### .big[Post Mortem]

Note: 

Post Mortems

When there is an issue, integrating some of the debugging steps that were used into the useful tips docs. 

This could be something as simple as saving a copy of a santised bash history somewhere, but is so very very useful when a senior SRE can show which of those sharpened tools they used so that a junior might learn. 

Which, in itself, brings me to the third major point. 
 
---
class: bottom left
~@ laptop-angle-small.jpg
# Feedback Loop

Note: the feedback loop. 

These caches don't just appear overnight. They evolve over time, as they are used, and are useful, for those on call .

Having a cache of the flags on an essoteric CLI is one thing, but having a well oiled bag of tricks is another. 


---
~@ laptop-angle-small.jpg
### .big[Recurring Issues]

Note: 
Especially with recurring issues. 

Now, this is different from one off things, and I want to focus on this for a moment. 

In an ideal world, no issue should happen more than once, because, hey, all problems are immediately fixed by the on-call engineer and will never happen again, right? 

For anyone whos done ops or any period of time (or dev, for that matter_, you know there's always a compromise between work arounds and fixes. 

That server that keeps alerting due to critical disk space usage? Is it easier to occasionally clean up the old webserver logs, or setup a scheduled task that archives logs older than a week? Or also deletes those older than a month? 

The engineering time to create such a script that's appropriate for the environment is non-trivial if it doesn't already exist, especially when considerations like data retention or GDPR come involved that affect the implementation. 

So, sometimes it's easier to, say, change monitoring to soft-alert at, say, a 10% diskspace free level so an engineer can cleanup things during the day, as opposed to waking up the engineer at 3am with a critical 5% free alert that would have the same action. 

Tuning alerts and actions for recurring events is absolutely valid, even in cases where "Yes, we'll fix that Soon". 


---
~@ laptop-angle-small.jpg
### .big[Automation]

Note: 

You can even start applying automations to these manual functions. 

Something simple like adding a for loop to the start of a command to apply it to many servers. 

Or making that for loop smarter by turning it into an ansible playbook that can check for things on the servers before applying commands. 

Taking the commands in your bag of tricks and turning them into cronjobs, or such. 


Again, it's going to depend on your environment, both machine and people. 

But in all of this, the biggest thing that I can suggest - 
---
~@ laptop-angle-small.jpg

### .big[Learning]

Note: turn this into a learning oppourtinuty for the members of your team. 

This feeds back into the discoverability and feedback loop steps, but making sure that juniors or other team members "learn the weather". 

Again, depending on your setup, if you have a junior that's starting to shadow, showing them the iffy machines; giving them a chance to debug things themselves, but working with them to solve issues in a timely manner. 

But making sure that any of those "We'll fix that soon" are noted. This is so so important so that people know what to expect. 

And when you finally get to fixing things, please make sure you communicate this. 

Having one sysadmin, or heaven forbid, a BOFH, being the only one that knows the temprement of your system doesn't scale. And there's a certain joy when your entire oncall rotation are able to be psudo-meteorologists and can just sortta  *tell* what might be going on. 

---
~@ laptop-angle-small.jpg

### .big[Flag change]

Note: While it might be great that things finally get fixed, that those alerts go away, I've been here long enough to know it's not always that simple. 

Infra changes almost always cause other issues down the line. Make sure you communicate these with your team, and in your cache. 

And, bonus points: especailly if you're lucky enough to be on a distributed team, if you're going to be personally make big changes that might have the slightest change of raising alerts, please take the pager. 

Especially if it's your workday, and you're not already on call. 


---
~@ laptop-angle-small.jpg

### .big[Deprecate & Delete]
Note: this is so important. 

Having a cache of information that is out of date isn't just annoying, it can be catastrophic. Your oncall engineer that finds the *old* fix everything command that used to be the silver bullet that is now the WORST THING TO RUN... they shuld not be finding that in their search cache. 

Deprecating content could be as simple as moving into a cache that's *not* searchable in your main search keyword, but still keeping it around in a secondary system. 

Or, once considered in the light of day, deleting it entirely. 

Having a lack of information at 3am is bad. Having actively harmful inforamtion is worse.  

---
class: bottom right
~@ empathy.jpg
# Empathy 

Note: Because at the end of the day, empathy is critical 

Showing empathy for your fellow engineer who is going to be thankful for that full night sleep is paid back in kind. 

Showing self-care by giving yourself the tools to help you get your job done so you can go back to counting sheep. 

Making sure your junior or new on call engineers don't freak out in the middle of the night because you left them a note about that upgrade, so those new errors they're seeing are totally okay (well, not okay, but not unexpected)

Thinking more about how less pages makes every one sleep easier, and what can be done to achieve that. 

Working in a team is hard, but as soon as you start expecting work out of hours, especially when on-call is involved, practicing explicit empathy makes things so much easier for everyone involved. 

---
class: bottom right
~@ blank-small.jpg
# Get started now

Note: you're not your best when you're tired, but you'll do your future self a favour and starting your bag of tricks today. 

A bashhistory, an odd command here and there, just start somewhere. Evolve it, and it'll help you on those early morning calls so you can get back to sleep. 

---
class: bottom left
~@ blank-small.jpg
# What are your tips?

Note: 

This entire talk has been from my own experiences, and while I was on call for years, I didn't do everything. And I did, finally, handback my pager around a year ago now. 

So I want to hear what you all have experienced, and what works for you. What did you find worked, and more importantly, what didn't work? If you can save just one person a frightful evening of anxiety with your tip, that'd be kinda neat. 

I'll be submitting this as an open space for this afternoon, so if you're interested in discussing this more, come along. 

---
class: bottom left
~@ moon.jpg
#= <br><br>Thanks!

.footnotes[Images from: Unsplash, WOCinTech]
Note: thank you for your time

