<br>
#= ORM: The Sequel
###= SyPy April 2018
@ footer.svg
---
#= ⚠️

Note: Before I start a word of warning
---
@= dceu18.png
&nbsp; <!-- .slide: data-background-color="#f58619" -->
<div style="-webkit-transform: rotate(-29deg);color: black;font-size: 124pt;margin-top: -400px; margin-left: 400px;z-index:100;"><b>&nbsp; .</b></div> <!-- .slide: data-background-color="#f58619" -->
Note: 
This talk is being presented next month at DjangoCon Europe

---
@= dceu18.png
&nbsp; <!-- .slide: data-background-color="#f58619" -->
<div style="-webkit-transform: rotate(-29deg);color: red;font-size: 124pt;margin-top: -400px; margin-left: 400px;z-index:100;"><b>DRAFT</b></div> <!-- .slide: data-background-color="#f58619" -->
Note: 

this talk is a work in progress. 

If you find any technical errors, or issues, please tell me **after** the talk. I"ll have my twitter and email at the end

Now, with that out of the way

*cough*. :center self:
---
! wave

Note: Hi I'm Katie 
---
@= djangologo.png

Note: And I do a bunch of things in the Django community 
---
@= dceu16.png
&nbsp; <!-- .slide: data-background-color="#302613" -->
Note: I spoke at DjangoCon Europe 16 in Budapest
---
@= dcus17.png
&nbsp; <!-- .slide: data-background-color="#c2eaf4" -->
Note: I was a mentor, and also gave a talk, at DjangoCon US 2017
---
~@ 17_bg.png
@= dcau17.png
Note: I was the organiser of djangocon australia 17
---
@= djangologo.png
Note: I'm currently serving as a Director of the Django Software Foundation
---
#= &nbsp;

Note: But I'm an absolute novice at django. I have no idea what I'm doing
---
@= djadmin.png
Note: I still see the django admin as 

---
@= djadmin_sparkles.png

Note: a magical piece of software development

---
~@ macbook.jpg
Note: But just because I'm a novice at django, doesn't mean I'm a novice at tech
---
~@ thinkpad.jpg
Note: I have over a decade of software development and systems administration behind me. 

Before getting into the Python/Django space, I was a ruby dev, working with Rails and Sinatra stacks 

But before that, around the time the magic was being removed from Django, I was in my first tech job, and using my first tech stack: 

---
@= apexlogo.png
&nbsp; <!-- .slide: data-background-color="#f8f8f8" -->

Note: Was Orale Application Express

Oracle Appplication express, also known as Apex, is a in-database web application creation suite. it comes free with Oracle XE (the free version of the database)
---
<img src="pictures/apex_window.png" style="margin-top: -50px; margin-left: -115px; max-width: 125%">

vv [StackOverflow](https://stackoverflow.com/questions/48789457/oracle-apex-version-3-2-tabindex-not-working) 

Note: Back in 2006, this was the bees knees. An entire web GUI way to build a website based on form submissions and database manpulations. I used this for years 
---
~@ apex32.jpg
Note: So much so, I was a technical reviewer for a technical book on the subject. 

Yes, I'm that much of a nerd. 
---

#= &nbsp;

Note: I haven't used APEX for years. But, there's one thing that I have an intrinstic knowledge of

---

= <h1 style="color: white;text-shadow: 1px 1px 6px black, 0 0 136px red, 0 0 51px yellow; font-family: arial; font-size: 200pt">SQL</h1>
= <h1 style="color: white;text-shadow: 1px 1px 6px black, 0 0 136px red, 0 0 51px yellow; font-family: arial; font-size:40pt">Structured Query Language</h1>

Note: SQL

It's like riding a bike. Left outer joins are always going to be a bit.. fuzzy, but I can't count the amount of times I wished there was an option of throwing a LIKE clause on search results. 


---
@= djadmin.png
Note: Getting back to Django. 

I'm still getting my head around how Django works

I mean, sure, for a sufficiently setup existing django application, the admin makes things so intuitive. 

But if you were to try and tell me how things work underneath

---
~@ fogofwar.png

Note: I would have some sort of fog of war thing going on. I can't tell what's going on. 
---
##= > *"Oh, just use the shell!"*
Note: Even worse when I'm told "Oh, just use the shell"

It's an empty space. But I've been told that this is where the actual Django magic lives 
---
= <h1 style="color: white;text-shadow: 1px 1px 6px black, 0 0 136px blue, 0 0 51px green; font-family: arial; font-size: 200pt">ORM</h1>

= <h1 style="color: white;text-shadow: 1px 1px 6px black, 0 0 136px blue, 0 0 51px green; font-family: arial; font-size: 40pt">Object Relational Mapper</h1>
Note: The ORM

The Object relational mapper

The engine that makes django go

But without context, what does that even mean?
---
#= Context

Note: Context is important. 

So for the purposes of this, let's break away from the normal. 

A number of tutorials start with a clean slate, and assume you have little to know dev experience. DjangoGirls is great for complete beginners to development

But it's not so helpful for developers who come into the space with prior knowledge

It's also not helpful for the way that I came into Django; trying to fix an existing project

So for the purposes of this, we're going to use an existing project
---
~@ legacy_explorer.png
---
#= Context
---
#= ✨
---
@^ unicodex_index.png

Note: 


If you've seen my DjangoCon EU 2016 talk, this website would be sort of familiar to you. 

I call it.. Unicodex. It's a django-backed database of different emoji from different platforms 

On the home page there's a bunch of emoji and if you click on one

---

@^ unicodex_sparkles.png

Note: it shows you the emoji from different vendors and the versions. 

So given this website exists, we can start poking around in the shell
---
##= "Just use the shell"
---
$$terminal bash
$$prompt ~
$$end
---
$$terminal bash
$$prompt ~
$$w cd project
$$end

Note: Going back to our original statement "Just use the shell", what we mean is invoking manage.py shell 
---
$$terminal bash
$$prompt ~
cd project<br>
$$prompt ~/project
$$w
$$end
---
$$terminal bash
$$prompt ~
cd project<br>
$$prompt ~/project
$$w ./manage.py shell
$$end

Note: So we navigate to our project directory and type manage.py shell
---
$$terminal python3.6
$$prompt ~
cd project<br>
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$w &gt;&gt;&gt;&nbsp;  
$$end

Note: and we're given a 
---
##= "But, how do I use the shell?"
##- *"..."*
---
##= Finding all tables
---
<pre><code>
<c>&dash;&dash; MySQL</c>
show tables

<c>&dash;&dash; PostgreSQL</c>
\dt

<c>&dash;&dash; Oracle</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>dba</l>.<l>tables</l>
</code></pre>
---
<pre><code>
<c>&num; ORM</c>
<c>&num; ...</c>

Note: To get this in the ORM.. there's no real good way. 

In order to start querying model objects, you need to import the models

But without looking at the model code, and understanding what you're looking at in order to generate the import statement, you can be at a complete loss. 

Thankfully, django is clever and has helpful methods you can call to generate a list of imports for all the models in the project
---
<pre><code>
<c># Generate import statements</c>
<r>from</r> django.apps <r>import</r> apps
&nbsp;
<r>for</r> app_config <r>in</r> apps.get_app_configs():
&nbsp; l <r>=</r> app_config.label
&nbsp; <r>for</r> model <r>in</r> app_config.get_models():
&nbsp; &nbsp; n <r>=</r> model._meta.object_name
&nbsp; &nbsp; <l>print</l>(<d>f'from</d> <l>{</l>l<l>}</l><d>.models import </d><l>{</l>n<l>}</l>')
</code></pre>
---
$$terminal python3.6
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$w &gt;&gt;&gt;&nbsp;  
$$end
---
$$terminal python3.6
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
&gt;&gt;&gt; from django.apps import apps<br>
&gt;&gt;&gt; for app_config in apps.get_app_configs():<br>
...&nbsp; l = app_config.label<br>
...&nbsp; for model in app_config.get_models():<br>
...&nbsp; &nbsp; n = model._meta.object_name<br>
...&nbsp; &nbsp; print(f'from {l}.models import {n}')<br>
$$w ...&nbsp; 
$$end
---
$$terminal python3.6
...&nbsp; l = app_config.label<br>
...&nbsp; for model in app_config.get_models():<br>
...&nbsp; &nbsp; n = model._meta.object_name<br>
...&nbsp; &nbsp; print(f'from {l}.models import {n}')<br>
...&nbsp;<br> 
from auth.models import Permission<br>
from auth.models import Group<br>
from auth.models import User<br>
from contenttypes.models import ContentType<br>
from sessions.models import Session<br>
from sites.models import Site<br>
from aldryn_sso.models import AldrynCloudUser<br>
from admin.models import LogEntry<br>
from unicodex.models import Codepoint<br>
from unicodex.models import Vendor<br>
from unicodex.models import VendorVersion<br>
from unicodex.models import Design<br>
$$w &gt;&gt;&gt;&nbsp;  
$$end
---
##= Finding all tables
### via the database
---
$$terminal bash
$$prompt ~/project
$$w ./manage.py dbshell
$$end
---
$$terminal psql
$$prompt ~/project
./manage.py dbshell<br>
psql (9.6.5, server 9.6.8)<br>
Type "help" for help.<br>
<br>
$$w db=#&nbsp;
$$end
---
$$terminal psql
$$prompt ~/project
./manage.py dbshell<br>
psql (9.6.5, server 9.6.8)<br>
Type "help" for help.<br>
<br>
$$w db=# \dt
$$end
---
$$terminal psql
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List of relations<br>
&nbsp;Schema |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | Type&nbsp; |&nbsp; Owner<br>
&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;+&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;+&dash;&dash;&dash;&dash;&dash;&dash;&dash;+&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;&dash;<br>
&nbsp;public | aldryn_sso_aldrynclouduser | table | postgres<br>
&nbsp;public | auth_group&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | table | postgres<br>
&nbsp;public | auth_group_permissions&nbsp; &nbsp; &nbsp;| table | postgres<br>
&nbsp;public | auth_permission&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | table | postgres<br>
&nbsp;public | auth_user&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | table | postgres<br>
&nbsp;public | auth_user_groups&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  | table | postgres<br>
&nbsp;public | auth_user_user_permissions | table | postgres<br>
&nbsp;public | django_admin_log&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;  | table | postgres<br>
&nbsp;public | django_content_type&nbsp; &nbsp; &nbsp; &nbsp; | table | postgres<br>
&nbsp;public&nbsp;|&nbsp;django_migrations&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br.
&nbsp;public&nbsp;|&nbsp;django_session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;django_site&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;unicodex_codepoint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;unicodex_design&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;unicodex_vendor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&dash;&dash;More&dash;&dash;
---
$$terminal psql
&nbsp;public | aldryn_sso_aldrynclouduser | table | postgres<br>
&nbsp;public | auth_group&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | table | postgres<br>
&nbsp;public | auth_group_permissions&nbsp; &nbsp; &nbsp;| table | postgres<br>
&nbsp;public | auth_permission&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | table | postgres<br>
&nbsp;public | auth_user&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | table | postgres<br>
&nbsp;public | auth_user_groups&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  | table | postgres<br>
&nbsp;public | auth_user_user_permissions | table | postgres<br>
&nbsp;public | django_admin_log&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp;  | table | postgres<br>
&nbsp;public | django_content_type&nbsp; &nbsp; &nbsp; &nbsp; | table | postgres<br>
&nbsp;public&nbsp;|&nbsp;django_migrations&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br.
&nbsp;public&nbsp;|&nbsp;django_session&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;django_site&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;unicodex_codepoint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;unicodex_design&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;unicodex_vendor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
&nbsp;public&nbsp;|&nbsp;unicodex_vendorversion&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;table&nbsp;|&nbsp;postgres<br>
(16 rows)<br>
<br>
$$w db=#&nbsp;
$$end
---
##= Show all table contents
---
<pre><code>
<c>&dash;&dash; SQL</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint;</l>
<br><br>
</code></pre>
---
<pre><code>
<c>&dash;&dash; SQL</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint;</l>

<c>&num; ORM</c>
Codepoint.objects.all()
</code></pre>
---
$$terminal python3.6
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$pyw
---
$$terminal python3.6
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$pyw from unicodex.models import Codepoint
---
$$terminal python3.6
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$py from unicodex.models import Codepoint
$$pyw 
---
$$terminal python3.6
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$py from unicodex.models import Codepoint
$$pyw Codepoint.objects.all()
---
$$terminal python3.6
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$py from unicodex.models import Codepoint
$$py Codepoint.objects.all()
&lt;QuerySet [&lt;Codepoint: Sparkles>, &lt;Codepoint: Unicorn>, &lt;Codepoint: Two Hearts>]><br>
$$pyw

---
##= Show specific table contents
---
<pre><code>
<c>&dash;&dash; SQL</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint c</l><br>&nbsp;<r>WHERE</r> <l>c</l>.<l>name</l> <r>=</r> 'Sparkles'; 
<br><br>
</code></pre>
---
<pre><code>
<c>&dash;&dash; SQL</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint c</l><br>&nbsp;<r>WHERE</r> <l>c</l>.<l>name</l> <r>&equals;</r> 'Sparkles'; 

<c>&num; ORM</c>
Codepoint.objects.filter(<r>name&equals;</r>'Sparkles')
</code></pre>
---
$$terminal python3.6
$$py from unicodex.models import Codepoint
$$pyw Codepoint.objects.filter(name='Sparkles')
---
$$terminal python3.6
$$py from unicodex.models import Codepoint
$$py Codepoint.objects.filter(name='Sparkles')
&lt;QuerySet [&lt;Codepoint: Sparkles>]><br>
$$pyw
---
##= Get specific record
---
$$terminal python3.6
$$py from unicodex.models import Codepoint
$$py Codepoint.objects.filter(name='Sparkles')
&lt;QuerySet [&lt;Codepoint: Sparkles>]><br>
$$pyw Codepoint.objects.get(name='Sparkles')
---
$$terminal python3.6
$$py from unicodex.models import Codepoint
$$py Codepoint.objects.filter(name='Sparkles')
&lt;QuerySet [&lt;Codepoint: Sparkles>]><br>
$$py Codepoint.objects.get(name='Sparkles')
&lt;Codepoint: Sparkles><br>
$$pyw
---
$$terminal python3.6
$$py from unicodex.models import Codepoint
$$py Codepoint.objects.filter(name='Sparkles')
&lt;QuerySet [&lt;Codepoint: Sparkles>]><br>
$$py Codepoint.objects.get(name='Sparkles')
&lt;Codepoint: Sparkles><br>
$$pyw Codepoint.objects.get()
---
$$terminal python3.6
$$py from unicodex.models import Codepoint
$$py Codepoint.objects.filter(name='Sparkles')
&lt;QuerySet [&lt;Codepoint: Sparkles>]><br>
$$py Codepoint.objects.get(name='Sparkles')
&lt;Codepoint: Sparkles><br>
$$py Codepoint.objects.get()
Traceback (most recent call last):<br>
&nbsp; File "&lt;console>", line 1, in &lt;module><br>
&nbsp; File "/usr/local/lib/python3.6/site-packages/django/db/models/manager.p y", line 85, in manager_method<br>
&nbsp; &nbsp; return getattr(self.get_queryset(), name)(&#42;args, &#42;&#42;kwargs)<br>
&nbsp; File "/usr/local/lib/python3.6/site-packages/django/db/models/query.py" , line 384, in get<br>
&nbsp; &nbsp; (self.model._meta.object_name, num)<br>
unicodex.models.MultipleObjectsReturned: get() returned more than one Codepoint -- it returned 3!<br>
$$pyw
---
##= Joins
---
<pre><code><c>&dash;&dash; SQL</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint c,<br>&nbsp; &nbsp; &nbsp; &nbsp;unicodex_design d</l><br>&nbsp;<r>WHERE</r> <l>c</l>.<l>name</l> <r>&equals;</r> 'Sparkles'<BR><r>&nbsp; &nbsp;AND</r> d.codepoint_id = c.id;
---
<pre><code><c>&dash;&dash; SQL</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint c,<br>&nbsp; &nbsp; &nbsp; &nbsp;unicodex_design d</l><br>&nbsp;<r>WHERE</r> <l>c</l>.<l>name</l> <r>&equals;</r> 'Sparkles'<BR><r>&nbsp; &nbsp;AND</r> d.codepoint_id = c.id; 

<c>&num; ORM</c>
Design.objects.filter(<o><br>&nbsp;&nbsp;&nbsp;codepoint__name&equals;</o>"Sparkles")
</code></pre>
---
<pre><code><c>&dash;&dash; SQL</c>
<r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint c,<br>&nbsp; &nbsp; &nbsp; &nbsp;unicodex_design d</l><br>&nbsp;<r>WHERE</r> <l>c</l>.<l>name</l> <r>&equals;</r> 'Sparkles'<BR><r>&nbsp; &nbsp;AND</r> d.codepoint_id = c.id; 

<c>&num; ORM</c>
Design.objects.filter(<o><br>&nbsp;&nbsp;&nbsp;codepoint__name&equals;</o>"Sparkles")
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <c>^^</c> 
</code></pre>
---
<pre><code>
<c>&num; ORM</c>
Thing.objects.filter(<o>relation__name&equals;</o>"str")
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <c>^^</c> 
</code></pre>

###- Double Underscore
#####- <span>'*just follow the fields til you get to the one you want*'<br>- <fl>[django docs](https://docs.djangoproject.com/en/2.0/topics/db/queries/#lookups-that-span-relationships)</fl></span>

Note: Django offers a powerful and intuitive way to “follow” relationships in lookups, taking care of the SQL JOINs for you automatically, behind the scenes. To span a relationship, just use the field name of related fields across models, separated by double underscores, until you get to the field you want."
---
$$terminal python3.6
$$py from unicodex.models import Design
$$pyw 
---
$$terminal python3.6
$$py from unicodex.models import Design
$$pyw Design.objects.filter(codepoint__name='Sparkles')
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(codepoint__name='Sparkles')
&lt;QuerySet [&lt;Design: Sparkles Microsoft - Windows 10>, &lt;Design: Sparkles Microsoft - Windows 8.1>, &lt;Design: Sparkles Microsoft - Windows 8.0>, &lt;Design: Sparkles Facebook - 2.2>, &lt;Design: Sparkles Facebook - 1.0>, &lt;Design: Sparkles Messenger - 1.0>, &lt;Design: Sparkles Twitter - 1.0>, &lt;Design: Sparkles EmojiOne - 3.0>, &lt;Design: Sparkles EmojiOne - 2.0>, &lt;Design: Sparkles EmojiOne - 1.0>,  '...(remaining elements truncated)...']><br>
$$pyw


Note: Truncated results are SO USEFUL
Data is still there, if you iterate over the list, but the print representation specificalyl doesn't flood your terminal
---
<pre><code>
<c>&num; Follow the fields</c>
Design.objects.filter(<br> &nbsp;<o>vendorversion__vendor__name&equals;</o>"Apple")
</code></pre>
---
<pre><code>
<c>&num; Follow the fields</c>
Design.objects.filter(<br> &nbsp;<o>vendorversion__vendor__name&equals;</o>"Apple")

<c>&num; ... and then some </c>
Design.objects.filter(<br> &nbsp;<o>vendorversion__vendor__name__contains&equals;</o>"App")
</code></pre>
---
<pre><code>
<c>&num; ... and then some AND </c>
Design.objects.filter(<br> &nbsp;<o>vendorversion__vendor__name__contains&equals;</o>"App",<br>&nbsp; <o>codepoint__name__startswith&equals;</o>"Spark",<br>&nbsp; <o>image__endswith&equals;</o>"png")
</code></pre>
---
<pre><code><c>&num; Field Lookups</c><table>
<tr><td><l>contains</l></td><td><o>LIKE "%?%"</o></td></tr>
<tr><td><l>icontains</l></td><td><o>ILIKE "%?%"</o></td></tr>
<tr><td><l>in</l></td><td><o>IN (?, ?, ?, ...)</o></td></tr>
<tr><td><l>gt, ge</l></td><td><o>&gt;, &gt;=</o></td></tr>
<tr><td><l>lt, le</l></td><td><o>&lt;, &lt;=</o></td></tr>
<tr><td><l>isnull</l></td><td><o>NULL</o></td></tr></table><c>&num; ... and many more!</c>
<span class="bfoot" style="margin-bottom: -170px"><fl>[docs - querysets field lookups](https://docs.djangoproject.com/en/2.0/ref/models/querysets/#field-lookups)</fl></span>
---
##= `OR` else
---
##= `Q`

Note: Q
---
<pre><code><c>&dash;&dash; SQL</c><br><r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint c,<br>&nbsp; &nbsp; unicodex_design d</l><br>&nbsp;<r>WHERE</r> d.codepoint_id &equals; c.id<br><l><r>&nbsp; &nbsp;AND</r> (c</l>.<l>name</l> <r>&equals;</r> 'Sparkles'<BR><l><r>&nbsp; &nbsp;&nbsp; OR</r> c</l>.<l>name</l> <r>&equals;</r> 'Unicorn')
</code></pre>
---
<pre><code><c>&dash;&dash; SQL</c><br><r>SELECT * <br>&nbsp; FROM</r> <l>unicodex_codepoint c, unicodex_design d</l><br>&nbsp;<r>WHERE</r> d.codepoint_id &equals; c.id<br><l><r>&nbsp; &nbsp;AND</r> (c</l>.<l>name</l> <r>&equals;</r> 'Sparkles'<BR><l><r>&nbsp; &nbsp;&nbsp; OR</r> c</l>.<l>name</l> <r>&equals;</r> 'Unicorn')
<c>&num; ORM</c>
<c>&num; ...</c>
---
$$terminal python3.6
$$pyw
---
$$terminal python3.6
$$pyw from unicodex.models import Design
---
$$terminal python3.6
$$py from unicodex.models import Design
$$pyw
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<w>&nbsp;</w>
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$pyw
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$pyw from django.db.models import Q
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$py from django.db.models import Q
$$pyw
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$py from django.db.models import Q
$$py Design.objects.filter(
... &nbsp; Q(codepoint&#95;&#95;name='Sparkles'), <br>
... &nbsp; Q(codepoint&#95;&#95;name='Unicorn'))<w>&nbsp;</w><br>
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$py from django.db.models import Q
$$py Design.objects.filter(
... &nbsp; Q(codepoint&#95;&#95;name='Sparkles'), <br>
... &nbsp; Q(codepoint&#95;&#95;name='Unicorn'))<br>
&lt;QuerySet []><br>
$$pyw
---
<pre><code><r>from</r> django.db.models <r>import</r> Q
<br>Design.objects.filter(<br>&nbsp; &nbsp;Q(<o>codepoint_&#95;name</o>&equals;'Unicorn'),<br>&nbsp; &nbsp;Q(<o>codepoint&#95;_name&equals;</o>"Sparkles")<br>)
<c># Unicorn and Sparkles?</c>
---
<pre><code><r>from</r> django.db.models <r>import</r> Q
<br>Design.objects.filter(<br>&nbsp; &nbsp;Q(<o>codepoint_&#95;name</o>&equals;'Unicorn'),<br>&nbsp; &nbsp;~Q(<o>codepoint&#95;_name&equals;</o>"Sparkles")<br>)
<c># Unicorn OR Sparkles!</c>
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$py from django.db.models import Q
$$py Design.objects.filter(
... &nbsp; Q(codepoint&#95;&#95;name='Sparkles'), <br>
... &nbsp; Q(codepoint&#95;&#95;name='Unicorn'))<br>
&lt;QuerySet []><br>
$$pyw
---
$$terminal python3.6
$$py from unicodex.models import Design
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$py from django.db.models import Q
$$py Design.objects.filter(
... &nbsp; Q(codepoint&#95;&#95;name='Sparkles'), <br>
... &nbsp; Q(codepoint&#95;&#95;name='Unicorn'))<br>
&lt;QuerySet []><br>
$$py Design.objects.filter(
... &nbsp; Q(codepoint&#95;&#95;name='Sparkles'), <br>
... &nbsp; ~Q(codepoint&#95;&#95;name='Unicorn'))<w>&nbsp;</w><br>
---
$$terminal python3.6
$$py Design.objects.filter(
... &nbsp; codepoint&#95;&#95;name='Sparkles', <br>
... &nbsp; codepoint&#95;&#95;name='Unicorn')<br>
&nbsp; File "&lt;console>", line 3<br>
SyntaxError: keyword argument repeated<br>
$$py from django.db.models import Q
$$py Design.objects.filter(
... &nbsp; Q(codepoint&#95;&#95;name='Sparkles'), <br>
... &nbsp; Q(codepoint&#95;&#95;name='Unicorn'))<br>
&lt;QuerySet []><br>
$$py Design.objects.filter(
... &nbsp; Q(codepoint&#95;&#95;name='Sparkles'), <br>
... &nbsp; ~Q(codepoint&#95;&#95;name='Unicorn'))<br>
&lt;QuerySet [&lt;Design: Unicorn EmojiOne - 2.0>, &lt;Design: Unicorn Apple - iOS 10.2>, &lt;Design: Unicorn Android - 8.0>, &lt;Design: Unicorn Android - 6.0>, &lt;Design: Unicorn Facebook - 2.2>, &lt;Design: Unicorn Twitter - 2.5>, &lt;Design: Unicorn EmojiOne - 3.0>]><br>
$$pyw
---
##= Counting results
---
<pre><code>
<c>&dash;&dash; SQL</c>
<r>SELECT count(1) <br>&nbsp; FROM</r> <l>unicodex_codepoint c, unicodex_design d</l><br>&nbsp;<r>WHERE</r> <l>c</l>.<l>name</l> <r>&equals;</r> 'Sparkles'<BR><r>&nbsp; &nbsp;AND</r> d.codepoint_id = c.id; 

<c>&num; ORM</c>
Design.objects.filter(<o><br>&nbsp;&nbsp;&nbsp;codepoint__name&equals;</o>"Sparkles").count()
</code></pre>
---
##= You've seen this before
---
##= This is how the admin works
---
#= 🤯
---

TODO admin walk though, filters, custom query string
---
##= What if the ORM doesn't do it?
---
##= `raw`
---
#= ⚠️
---
<div class="left"><span style="font-family: Roboto">Performing raw SQL queries</span><br><br>
<rr>The raw() manager ...</rr><br/>
<br>⚠️ <rb>You should be very careful whenever you write.</rb><br>
<br>`Abc.objects.raw('SELECT * FROM myapp_abc')`<br><br>
🗒  <rr>Where did the name of the Person table come from in that example?</rr>
<br>⚠️ <rb>No checking is done on the SQL statement that is passed in to .raw().</rb>
<br>⚠️ <rb>If you are performing queries on MySQL, note that MySQL’s silent type coercion may cause unexpected results when mixing types.</rb>
<br>⚠️ <rb>While a RawQuerySet instance can be iterated over like a normal QuerySet, RawQuerySet doesn’t implement </rb><br></div>
---
##= The SQL isn't always worse
---
##= Discover more yourself
---
##= Creating objects
## Field Types
## Field Releationships
---
##= <fl>docs</fl>
---
#= Protip
##= Add `ipython` to your requirements.txt, Pipfile
---
$$terminal python3.6
$$prompt ~
cd project<br>
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin<br>
Type "help", "copyright", "credits" or "license" for more information.<br>
(InteractiveConsole)<br>
$$w &gt;&gt;&gt;&nbsp;  
$$end
---
$$terminal python3.6
$$prompt ~
cd project<br>
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
Type 'copyright', 'credits' or 'license' for more information<br>
IPython 6.3.1 -- An enhanced Interactive Python. Type '?' for help.<br><br>
$$w <tg>In [</tg><ty>1</ty><tg>]:&nbsp; 
---
$$terminal python3.6
$$prompt ~
cd project<br>
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
Type 'copyright', 'credits' or 'license' for more information<br>
IPython 6.3.1 -- An enhanced Interactive Python. Type '?' for help.<br>
<br><tg>In [</tg><ty>1</ty><tg>]: from </tg><tb>uni</tb><w>&nbsp;</w>
---
$$terminal python3.6
$$prompt ~
cd project<br>
$$prompt ~/project
./manage.py shell<br>
Python 3.6.3 (default, Nov  9 2017, 15:58:30)<br>
Type 'copyright', 'credits' or 'license' for more information<br>
IPython 6.3.1 -- An enhanced Interactive Python. Type '?' for help.<br>
<br><tg>In [</tg><ty>1</ty><tg>]: from </tg><tb>uni</tb><w>&nbsp;</w>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <ww>unicodedata</ww>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <ww>unicodex&nbsp; &nbsp;</ww>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <ww>unittest&nbsp; &nbsp;</ww>
---

~@ legacy_explorer.png
Note: explore code

Find bugs
---
####= Read more
<br>
## *Why I love Legacy DevOps*

@= legacy3.png
vv [The Recompiler, Issue 4](https://recompilermag.com/issues/issue-4/why-i-love-legacy-devops/) -- Illustration by Victoria Wang
---
<br>
! space |  space | claps | space | space
@ footer.svg
vv Some images: [WOCinTech Chat](https://www.flickr.com/photos/wocintechchat/albums)
---
~@ pyconau18.png
<h2 style="color: white; margin-top: 256px">Call for Proposals Now Open</h2>
<br><br><br>
<h2 style="color: white; margin-top: 65px">pycon-au.org</h2>

Note: PS PyCon AU is a thing that's happening 
